{% extends "base.html" %}

{% block content %}
  <div class="fixed-header">
    <h1>All Mindscape AMAs</h1>
    <div class="player-container">
        <audio id="audio-player"></audio>
        <div class="player-controls">
            <button id="play-button"><i class="fas fa-play"></i></button>
            <button id="pause-button"><i class="fas fa-pause"></i></button>
            <button id="prev-button"><i class="fas fa-backward"></i></button>
            <button id="next-button"><i class="fas fa-forward"></i></button>
            <button id="shuffle-button"><i class="fas fa-random"></i></button>
        </div>
    </div>

    <div class="podcast-info">
        All audio segments play directly from the official
        <a href="https://www.preposterousuniverse.com/podcast/" target="_blank" rel="noopener noreferrer">
            Mindscape podcast
        </a>
        episodes.
        This web page has no affiliation with Mindscape.
        Please consider supporting the
        Mindscape Patreon
        https://www.patreon.com/seanmcarroll
        // ai! 
    </div>
    
  </div>
  
  <div class="content">
    <ul class="segment-list">
        {% for segment in segments %}
        <li class="segment-item" 
            data-start="{{ segment.start }}" 
            data-end="{{ segment.end }}"
            data-url="{{ segment.url }}">
            <span class="segment-date">{{ segment.date }}</span>
            <span class="segment-text">{{ segment.text }}</span>
            <span class="segment-duration">{{ segment.duration_str }}</span>
            <a href="{{ segment.url }}#t={{ segment.start }},{{ segment.end }}" 
               class="debug-link" 
               target="_blank"
               rel="noopener noreferrer"
               title="Direct link to this segment in the episode.">
                <i class="fas fa-link"></i>
            </a>
        </li>
        {% endfor %}
    </ul>
    
    <script>
        function getAudioSrc() {
            return segments[currentSegment].dataset.url;
        }
    </script>
{% endblock %}
