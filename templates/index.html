{% extends "base.html" %}

{% block content %}
  <div class="fixed-header">
    <h1>All Mindscape AMAs</h1>
    <div class="player-container">
        <audio id="audio-player"></audio>
        <div class="player-controls">
            <button id="play-pause-button"><i class="fas fa-play"></i></button>
            <button id="prev-button"><i class="fas fa-backward"></i></button>
            <button id="next-button"><i class="fas fa-forward"></i></button>
            <button id="shuffle-button"><i class="fas fa-random"></i></button>
            <button id="search-toggle-button"><i class="fas fa-search"></i></button>
        </div>
    </div>

    <div class="search-container" id="search-container" style="display: none;">
        <input type="text" id="search-input" placeholder="Search questions..." aria-label="Search segments">
        <div id="segment-counter" class="segment-counter">
            Showing all <span id="visible-count">0</span> questions
        </div>
    </div>
    
    
  </div>
  
  <div class="content">
    <div class="podcast-info">
        All audio streams directly from
        <a href="https://art19.com/shows/sean-carrolls-mindscape" target="_blank" rel="noopener noreferrer">
            ART19's official feed</a>
        of the
        <a href="https://www.preposterousuniverse.com/podcast/" target="_blank" rel="noopener noreferrer">
            Mindscape podcast</a>,
        and includes the original ads between segments.
        This site has no affiliation with Mindscape.
        Please consider supporting
        <a href="https://www.patreon.com/seanmcarroll" target="_blank" rel="noopener noreferrer">
            Mindscape on Patreon</a>.
        
    </div>
    <ul class="segment-list">
        {% for segment in segments %}
        <li class="segment-item" 
            data-start="{{ segment.start }}" 
            data-end="{{ segment.end }}"
            data-url="{{ segment.url }}">
            <div class="segment-metadata">
                <span class="segment-date">{{ segment.date }}</span>
                <a href="{{ segment.url }}#t={{ segment.start }},{{ segment.end }}"
                   class="segment-duration"
                   target="_blank"
                   rel="noopener noreferrer"
                   title="Direct link to this segment in the episode">
                   {{ segment.duration_str }} <i class="fas fa-external-link-alt"></i>
                </a>
            </div>
            <span class="segment-text">{{ segment.text }}</span>
        </li>
        {% endfor %}
    </ul>
    
    <script>
        function getAudioSrc() {
            return segments[currentSegment].dataset.url;
        }
    </script>
{% endblock %}
