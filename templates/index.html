{% extends "base.html" %}

{% block content %}
    <h1>Audio Segments</h1>
    <div class="player-container">
        <audio id="audio-player"></audio>
        <div class="player-controls">
            <button id="play-button"><i class="fas fa-play"></i></button>
            <button id="pause-button"><i class="fas fa-pause"></i></button>
            <button id="prev-button"><i class="fas fa-backward"></i></button>
            <button id="next-button"><i class="fas fa-forward"></i></button>
            <button id="shuffle-button"><i class="fas fa-random"></i></button>
        </div>
    </div>
    
    <ul class="segment-list">
        {% for segment in segments %}
        <li class="segment-item" 
            data-start="{{ segment.start }}" 
            data-end="{{ segment.end }}"
            data-url="{{ segment.url }}">
            <span class="segment-date">{{ segment.date }}</span>
            <span class="segment-text">{{ segment.text }}</span>
            <span class="segment-duration">{{ segment.duration_str }}</span>
            <a href="{{ segment.url }}#t={{ segment.start }},{{ segment.end }}" 
               class="debug-link" 
               target="_blank"
               title="Direct link to this segment">
                <i class="fas fa-link"></i>
            </a>
        </li>
        {% endfor %}
    </ul>
    
    <script>
        function getAudioSrc() {
            return segments[currentSegment].dataset.url;
        }
    </script>
{% endblock %}
